package tw.com.ctt.util;

import static org.junit.Assert.assertTrue;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.Map;

import org.junit.runners.JUnit4;
import org.json.JSONArray;
import org.json.JSONObject;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;

@RunWith(JUnit4.class)
public class CTTLotteryCalc115Autotest {
	ArrayList<String> answer;
	String testCondition;
	@Before
	public void before() {
		
	}
	
	@After
	public void after() {
		answer = null;
		testCondition = null;
	}

	@Test
	public void	testssc() {
		answer = new ArrayList<String>();
		//期望答案
		String[] ans = {"11|4|9","9|10|11","1|10|11","4|6|5","7|6|8","4,9,11","9,10,11","1,10,11","4,5,6","6,7,8","11|4","9|10","1|10","4|6","7|6","4,11","9,10","1,10","4,6","6,7","4_9_11","9_10_11","1_10_11","4_5_6","6_7_8","-","-","1","-","-","-","-","-","-","-","-","-","1","1","-","-","-","-","-","-","-","-","-","1","-","-","-","1","-","-","-","-","-","-","1","-","-","1","1","-","1","1","1","11","4","9","3","2","9","10","11","3","1","1","5","11","3","9","2","4","6","8","10","8","10","11","2","1","2|3|4|9|11","1|3|9|10|11","1|3|5|9|11","2|4|6|8|10","1|2|8|10|11","2|3|4|9|11","1|3|9|10|11","1|3|5|9|11","2|4|6|8|10","1|2|8|10|11","2|3|4|9|11","1|3|9|10|11","1|3|5|9|11","2|4|6|8|10","2|3|4|9|11","1|3|9|10|11","1|3|5|9|11","2|3|4|9|11","1|3|9|10|11","1|3|5|9|11","2|4|6|8|10","2|3|4|9|11","1|3|9|10|11","1|3|5|9|11","2|3|4|9|11","1|3|9|10|11","1|3|5|9|11","1|2|7|10|11","1|3|9|10|11","1|3|5|9|11","2|4|6|8|10"};
		//
		//測試資料
		testCondition ="{\"calc\":[{\"rule\":\"115_q3\",\"kj\":\"11,04,09,03,02\"},"+"{\"rule\":\"115_q3\",\"kj\":\"09,10,11,03,01\"},"+"{\"rule\":\"115_q3\",\"kj\":\"01,10,11,03,09\"},"+"{\"rule\":\"115_q3\",\"kj\":\"04,06,05,08,03\"},"+"{\"rule\":\"115_q3\",\"kj\":\"07,06,08,09,02\"},"+"{\"rule\":\"115_q3z\",\"kj\":\"11,04,09,03,02\"},"+"{\"rule\":\"115_q3z\",\"kj\":\"09,10,11,03,01\"},"+"{\"rule\":\"115_q3z\",\"kj\":\"01,10,11,03,09\"},"+"{\"rule\":\"115_q3z\",\"kj\":\"04,06,05,08,03\"},"+"{\"rule\":\"115_q3z\",\"kj\":\"07,06,08,09,02\"},"+"{\"rule\":\"115_q2\",\"kj\":\"11,4,9,3,2\"},"+"{\"rule\":\"115_q2\",\"kj\":\"9,10,11,3,1\"},"+"{\"rule\":\"115_q2\",\"kj\":\"1,10,11,3,9\"},"+"{\"rule\":\"115_q2\",\"kj\":\"4,6,5,8,3\"},"+"{\"rule\":\"115_q2\",\"kj\":\"7,6,8,9,2\"},"+"{\"rule\":\"115_q2z\",\"kj\":\"11,4,9,3,2\"},"+"{\"rule\":\"115_q2z\",\"kj\":\"9,10,11,3,1\"},"+"{\"rule\":\"115_q2z\",\"kj\":\"1,10,11,3,9\"},"+"{\"rule\":\"115_q2z\",\"kj\":\"4,6,5,8,3\"},"+"{\"rule\":\"115_q2z\",\"kj\":\"7,6,8,9,2\"},"+"{\"rule\":\"115_q3bdw\",\"kj\":\"11,4,9,3,2\"},"+"{\"rule\":\"115_q3bdw\",\"kj\":\"9,10,11,3,1\"},"+"{\"rule\":\"115_q3bdw\",\"kj\":\"1,10,11,3,9\"},"+"{\"rule\":\"115_q3bdw\",\"kj\":\"4,6,5,8,3\"},"+"{\"rule\":\"115_q3bdw\",\"kj\":\"7,6,8,9,2\"},"+"{\"rule\":\"115_dds_5\",\"kj\":\"11,4,9,3,2\"},"+"{\"rule\":\"115_dds_5\",\"kj\":\"9,10,11,2,1\"},"+"{\"rule\":\"115_dds_5\",\"kj\":\"1,5,11,3,9\"},"+"{\"rule\":\"115_dds_5\",\"kj\":\"4,6,8,9,2\"},"+"{\"rule\":\"115_dds_5\",\"kj\":\"2,4,8,10,6\"},"+"{\"rule\":\"115_dds_5\",\"kj\":\"8,10,11,2,1\"},"+"{\"rule\":\"115_dds_4\",\"kj\":\"11,4,9,3,2\"},"+"{\"rule\":\"115_dds_4\",\"kj\":\"9,10,11,2,1\"},"+"{\"rule\":\"115_dds_4\",\"kj\":\"1,5,11,3,9\"},"+"{\"rule\":\"115_dds_4\",\"kj\":\"4,6,8,9,2\"},"+"{\"rule\":\"115_dds_4\",\"kj\":\"2,4,8,10,6\"},"+"{\"rule\":\"115_dds_4\",\"kj\":\"8,10,11,2,1\"},"+"{\"rule\":\"115_dds_3\",\"kj\":\"11,4,9,3,2\"},"+"{\"rule\":\"115_dds_3\",\"kj\":\"9,10,11,2,1\"},"+"{\"rule\":\"115_dds_3\",\"kj\":\"1,5,11,3,9\"},"+"{\"rule\":\"115_dds_3\",\"kj\":\"4,6,8,9,2\"},"+"{\"rule\":\"115_dds_3\",\"kj\":\"2,4,8,10,6\"},"+"{\"rule\":\"115_dds_3\",\"kj\":\"8,10,11,2,1\"},"+"{\"rule\":\"115_dds_2\",\"kj\":\"11,4,9,3,2\"},"+"{\"rule\":\"115_dds_2\",\"kj\":\"9,10,11,2,1\"},"+"{\"rule\":\"115_dds_2\",\"kj\":\"1,5,11,3,9\"},"+"{\"rule\":\"115_dds_2\",\"kj\":\"4,6,8,9,2\"},"+"{\"rule\":\"115_dds_2\",\"kj\":\"2,4,8,10,6\"},"+"{\"rule\":\"115_dds_2\",\"kj\":\"8,10,11,2,1\"},"+"{\"rule\":\"115_dds_1\",\"kj\":\"11,4,9,3,2\"},"+"{\"rule\":\"115_dds_1\",\"kj\":\"9,10,11,2,1\"},"+"{\"rule\":\"115_dds_1\",\"kj\":\"1,5,11,3,9\"},"+"{\"rule\":\"115_dds_1\",\"kj\":\"4,6,8,9,2\"},"+"{\"rule\":\"115_dds_1\",\"kj\":\"2,4,8,10,6\"},"+"{\"rule\":\"115_dds_1\",\"kj\":\"8,10,11,2,1\"},"+"{\"rule\":\"115_dds_0\",\"kj\":\"11,4,9,3,2\"},"+"{\"rule\":\"115_dds_0\",\"kj\":\"9,10,11,2,1\"},"+"{\"rule\":\"115_dds_0\",\"kj\":\"1,5,11,3,9\"},"+"{\"rule\":\"115_dds_0\",\"kj\":\"4,6,8,9,2\"},"+"{\"rule\":\"115_dds_0\",\"kj\":\"2,4,8,10,6\"},"+"{\"rule\":\"115_dds_0\",\"kj\":\"8,10,11,2,1\"},"+"{\"rule\":\"115_czw_3\",\"kj\":\"9,10,11,3,1\"},"+"{\"rule\":\"115_czw_9\",\"kj\":\"9,10,11,3,1\"},"+"{\"rule\":\"115_czw_4\",\"kj\":\"11,4,9,3,2\"},"+"{\"rule\":\"115_czw_8\",\"kj\":\"11,4,9,3,2\"},"+"{\"rule\":\"115_czw_5\",\"kj\":\"1,5,11,3,9\"},"+"{\"rule\":\"115_czw_6\",\"kj\":\"4,6,8,9,2\"},"+"{\"rule\":\"115_czw_7\",\"kj\":\"2,4,8,10,7\"},"+"{\"rule\":\"115_dwd_1\",\"kj\":\"11,4,9,3,2\"},"+"{\"rule\":\"115_dwd_2\",\"kj\":\"11,4,9,3,2\"},"+"{\"rule\":\"115_dwd_3\",\"kj\":\"11,4,9,3,2\"},"+"{\"rule\":\"115_dwd_4\",\"kj\":\"11,4,9,3,2\"},"+"{\"rule\":\"115_dwd_5\",\"kj\":\"11,4,9,3,2\"},"+"{\"rule\":\"115_dwd_1\",\"kj\":\"9,10,11,3,1\"},"+"{\"rule\":\"115_dwd_2\",\"kj\":\"9,10,11,3,1\"},"+"{\"rule\":\"115_dwd_3\",\"kj\":\"9,10,11,3,1\"},"+"{\"rule\":\"115_dwd_4\",\"kj\":\"9,10,11,3,1\"},"+"{\"rule\":\"115_dwd_5\",\"kj\":\"9,10,11,3,1\"},"+"{\"rule\":\"115_dwd_1\",\"kj\":\"1,5,11,3,9\"},"+"{\"rule\":\"115_dwd_2\",\"kj\":\"1,5,11,3,9\"},"+"{\"rule\":\"115_dwd_3\",\"kj\":\"1,5,11,3,9\"},"+"{\"rule\":\"115_dwd_4\",\"kj\":\"1,5,11,3,9\"},"+"{\"rule\":\"115_dwd_5\",\"kj\":\"1,5,11,3,9\"},"+"{\"rule\":\"115_dwd_1\",\"kj\":\"2,4,6,8,10\"},"+"{\"rule\":\"115_dwd_2\",\"kj\":\"2,4,6,8,10\"},"+"{\"rule\":\"115_dwd_3\",\"kj\":\"2,4,6,8,10\"},"+"{\"rule\":\"115_dwd_4\",\"kj\":\"2,4,6,8,10\"},"+"{\"rule\":\"115_dwd_5\",\"kj\":\"2,4,6,8,10\"},"+"{\"rule\":\"115_dwd_1\",\"kj\":\"8,10,11,2,1\"},"+"{\"rule\":\"115_dwd_2\",\"kj\":\"8,10,11,2,1\"},"+"{\"rule\":\"115_dwd_3\",\"kj\":\"8,10,11,2,1\"},"+"{\"rule\":\"115_dwd_4\",\"kj\":\"8,10,11,2,1\"},"+"{\"rule\":\"115_dwd_5\",\"kj\":\"8,10,11,2,1\"},"+"{\"rule\":\"115_r1\",\"kj\":\"11,4,9,3,2\"},"+"{\"rule\":\"115_r1\",\"kj\":\"9,10,11,3,1\"},"+"{\"rule\":\"115_r1\",\"kj\":\"1,5,11,3,9\"},"+"{\"rule\":\"115_r1\",\"kj\":\"2,4,6,8,10\"},"+"{\"rule\":\"115_r1\",\"kj\":\"8,10,11,2,1\"},"+"{\"rule\":\"115_r2\",\"kj\":\"11,4,9,3,2\"},"+"{\"rule\":\"115_r2\",\"kj\":\"9,10,11,3,1\"},"+"{\"rule\":\"115_r2\",\"kj\":\"1,5,11,3,9\"},"+"{\"rule\":\"115_r2\",\"kj\":\"2,4,6,8,10\"},"+"{\"rule\":\"115_r2\",\"kj\":\"8,10,11,2,1\"},"+"{\"rule\":\"115_r3\",\"kj\":\"11,4,9,3,2\"},"+"{\"rule\":\"115_r3\",\"kj\":\"9,10,11,3,1\"},"+"{\"rule\":\"115_r3\",\"kj\":\"1,5,11,3,9\"},"+"{\"rule\":\"115_r3\",\"kj\":\"2,4,6,8,10\"},"+"{\"rule\":\"115_r4\",\"kj\":\"11,4,9,3,2\"},"+"{\"rule\":\"115_r4\",\"kj\":\"9,10,11,3,1\"},"+"{\"rule\":\"115_r4\",\"kj\":\"1,5,11,3,9\"},"+"{\"rule\":\"115_r5\",\"kj\":\"11,4,9,3,2\"},"+"{\"rule\":\"115_r5\",\"kj\":\"9,10,11,3,1\"},"+"{\"rule\":\"115_r5\",\"kj\":\"1,5,11,3,9\"},"+"{\"rule\":\"115_r5\",\"kj\":\"2,4,6,8,10\"},"+"{\"rule\":\"115_r6\",\"kj\":\"11,4,9,3,2\"},"+"{\"rule\":\"115_r6\",\"kj\":\"9,10,11,3,1\"},"+"{\"rule\":\"115_r6\",\"kj\":\"1,5,11,3,9\"},"+"{\"rule\":\"115_r7\",\"kj\":\"11,4,9,3,2\"},"+"{\"rule\":\"115_r7\",\"kj\":\"9,10,11,3,1\"},"+"{\"rule\":\"115_r7\",\"kj\":\"1,5,11,3,9\"},"+"{\"rule\":\"115_r8\",\"kj\":\"1,2,7,10,11\"},"+"{\"rule\":\"115_r8\",\"kj\":\"9,10,11,3,1\"},"+"{\"rule\":\"115_r8\",\"kj\":\"1,5,11,3,9\"},"+"{\"rule\":\"115_r8\",\"kj\":\"2,4,6,8,10\"}]}";
		//
		for (int i = 0; i < ans.length; i++) {
			answer.add(ans[i]);
		}
		JSONObject obj = new JSONObject(testCondition);
		JSONArray arr = obj.getJSONArray("calc");
		if (arr.length() == answer.size()) {
			CTTLotteryCalc115 L115test = new CTTLotteryCalc115();
			for(int i =0;i<arr.length();i++) {
				JSONObject kjdata = (JSONObject) arr.get(i);
				String kj = kjdata.getString("kj");
				String rule = kjdata.getString("rule");
				List<String> kjArray = Arrays.asList(kj.split(","));
				List<Integer>listIntegers = new ArrayList<Integer>(kjArray.size());
				for(String current:kjArray) {
					listIntegers.add(Integer.parseInt(current));
				}
				Map<String , String> result = L115test.getResult(listIntegers);
				if (ans[i].equals(result.get(rule))) {
					assertTrue(ans[i].equals(result.get(rule)));
				}else if(ans[i].length()>5){
					System.out.println(ans[i].getClass().getName());
					System.out.println(listIntegers.getClass().getName());
					System.out.println(listIntegers);
				}else{
					System.out.println(""+i+" "+ans[i]+" not equal"+" "+result.get(rule)+"");
				}
				
			}
			System.out.println("testCTTLotteryCalc115測試完成");
		}else {
			System.out.println("輸入錯誤");
		}
	}
}
